{"version":3,"sources":["../../../src/lib/ZoomButtons.js"],"names":["React","Component","PropTypes","interpolateNumber","last","ZoomButtons","props","handleZoomOut","bind","handleZoomIn","zoom","direction","context","xAxisZoom","xScale","plotData","xAccessor","cx","zoomMultiplier","c","domain","start","end","range","map","x","invert","newStart","newEnd","left","right","foo","i","interval","setInterval","shift","length","clearInterval","chartConfig","width","height","size","heightFromBase","rx","ry","stroke","fill","strokeWidth","fillOpacity","fontSize","textDy","textFill","centerX","Math","round","y","propTypes","number","isRequired","string","defaultProps","contextTypes","func","object","array"],"mappings":"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","file":"ZoomButtons.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n// import { mean } from \"d3-array\";\n\nimport { interpolateNumber } from \"d3-interpolate\";\n\nimport { last } from \"./utils\";\n\nclass ZoomButtons extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleZoomOut = this.handleZoomOut.bind(this);\n\t\tthis.handleZoomIn = this.handleZoomIn.bind(this);\n\t\tthis.zoom = this.zoom.bind(this);\n\t}\n\tzoom(direction) {\n\t\tconst { xAxisZoom, xScale, plotData, xAccessor } = this.context;\n\t\tconst cx = xScale(xAccessor(last(plotData)));\n\t\t// mean(xScale.range());\n\t\tconst { zoomMultiplier } = this.props;\n\n\t\tconst c = direction > 0 ? 1 * zoomMultiplier : 1 / zoomMultiplier;\n\n\t\tconst [start, end] = xScale.domain();\n\t\tconst [newStart, newEnd] = xScale.range()\n\t\t\t.map(x => cx + (x - cx) * c)\n\t\t\t.map(xScale.invert);\n\n\t\tconst left = interpolateNumber(start, newStart);\n\t\tconst right = interpolateNumber(end, newEnd);\n\n\t\tconst foo = [0.25, 0.3, 0.5, 0.6, 0.75, 1].map(i => {\n\t\t\treturn [left(i), right(i)];\n\t\t});\n\n\t\tthis.interval = setInterval(() => {\n\t\t\txAxisZoom(foo.shift());\n\t\t\tif (foo.length === 0) {\n\t\t\t\tclearInterval(this.interval);\n\t\t\t\tdelete this.interval;\n\t\t\t}\n\t\t}, 10);\n\t}\n\thandleZoomOut() {\n\t\tif (this.interval) return;\n\t\tthis.zoom(1);\n\t}\n\thandleZoomIn() {\n\t\tif (this.interval) return;\n\t\tthis.zoom(-1);\n\t}\n\trender() {\n\t\tconst { chartConfig } = this.context;\n\t\tconst { width, height } = chartConfig;\n\t\tconst { size, heightFromBase, rx, ry } = this.props;\n\t\tconst { stroke, fill, strokeWidth, fillOpacity } = this.props;\n\t\tconst { fontSize, textDy, textFill } = this.props;\n\t\tconst centerX = Math.round(width / 2);\n\t\tconst y = height - heightFromBase;\n\n\t\treturn (\n\t\t\t<g className=\"react-stockcharts-zoom-button\">\n\t\t\t\t<rect\n\t\t\t\t\tx={centerX - size - strokeWidth}\n\t\t\t\t\ty={y}\n\t\t\t\t\trx={rx}\n\t\t\t\t\try={ry}\n\t\t\t\t\theight={size}\n\t\t\t\t\twidth={size}\n\t\t\t\t\tfill={fill}\n\t\t\t\t\tfillOpacity={fillOpacity}\n\t\t\t\t\tstroke={stroke}\n\t\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\t/>\n\t\t\t\t<text\n\t\t\t\t\tx={centerX - size / 2 - strokeWidth}\n\t\t\t\t\ty={y + size / 2}\n\t\t\t\t\tdy={textDy}\n\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\tfill={textFill}\n\t\t\t\t>-</text>\n\t\t\t\t<rect\n\t\t\t\t\tx={centerX + strokeWidth}\n\t\t\t\t\ty={y}\n\t\t\t\t\trx={rx}\n\t\t\t\t\try={ry}\n\t\t\t\t\theight={size}\n\t\t\t\t\twidth={size}\n\t\t\t\t\tfill={fill}\n\t\t\t\t\tfillOpacity={fillOpacity}\n\t\t\t\t\tstroke={stroke}\n\t\t\t\t\tstrokeWidth={strokeWidth}\n\t\t\t\t/>\n\t\t\t\t<text\n\t\t\t\t\tx={centerX + size / 2 + strokeWidth}\n\t\t\t\t\ty={y + size / 2}\n\t\t\t\t\tdy={textDy}\n\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\tfill={textFill}\n\t\t\t\t>+</text>\n\t\t\t\t<rect className=\"react-stockcharts-enable-interaction out\"\n\t\t\t\t\tonClick={this.handleZoomOut}\n\t\t\t\t\tx={centerX - size - strokeWidth}\n\t\t\t\t\ty={y}\n\t\t\t\t\trx={rx}\n\t\t\t\t\try={ry}\n\t\t\t\t\theight={size}\n\t\t\t\t\twidth={size}\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t/>\n\t\t\t\t<rect className=\"react-stockcharts-enable-interaction in\"\n\t\t\t\t\tonClick={this.handleZoomIn}\n\t\t\t\t\tx={centerX + strokeWidth}\n\t\t\t\t\ty={y}\n\t\t\t\t\trx={rx}\n\t\t\t\t\try={ry}\n\t\t\t\t\theight={size}\n\t\t\t\t\twidth={size}\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nZoomButtons.propTypes = {\n\tzoomMultiplier: PropTypes.number.isRequired,\n\tsize: PropTypes.number.isRequired,\n\theightFromBase: PropTypes.number.isRequired,\n\trx: PropTypes.number.isRequired,\n\try: PropTypes.number.isRequired,\n\tstroke: PropTypes.string.isRequired,\n\tstrokeWidth: PropTypes.number.isRequired,\n\tfill: PropTypes.string.isRequired,\n\tfillOpacity: PropTypes.number.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n\ttextDy: PropTypes.string.isRequired,\n\ttextFill: PropTypes.string.isRequired,\n};\n\nZoomButtons.defaultProps = {\n\tsize: 20,\n\theightFromBase: 50,\n\trx: 3,\n\try: 3,\n\tstroke: \"#000000\",\n\tstrokeWidth: 1,\n\tfill: \"#D6D6D6\",\n\tfillOpacity: 1,\n\tfontSize: 16,\n\ttextDy: \".3em\",\n\ttextFill: \"#000000\",\n\tzoomMultiplier: 1.5,\n};\n\nZoomButtons.contextTypes = {\n\txScale: PropTypes.func.isRequired,\n\tchartConfig: PropTypes.object.isRequired,\n\tplotData: PropTypes.array.isRequired,\n\txAccessor: PropTypes.func.isRequired,\n\txAxisZoom: PropTypes.func.isRequired,\n};\n\nexport default ZoomButtons;\n"]}