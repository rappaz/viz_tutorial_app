{"version":3,"sources":["../../../src/lib/Chart.js"],"names":["React","PropTypes","scaleLinear","PureComponent","isNotDefined","noop","find","Chart","props","context","yScale","bind","listener","id","subscribe","unsubscribe","type","moreProps","state","e","onContextMenu","currentCharts","indexOf","chartConfig","each","copy","chartId","origin","x","y","children","propTypes","height","number","width","oneOfType","array","func","string","isRequired","yExtents","yExtentsCalculator","propName","componentName","Error","flipYScale","bool","padding","shape","top","bottom","node","defaultProps","yPan","contextTypes","childContextTypes","object"],"mappings":"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","file":"Chart.js","sourcesContent":["\"use strict\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { scaleLinear } from \"d3-scale\";\n\nimport PureComponent from \"./utils/PureComponent\";\nimport {\n\tisNotDefined,\n\tnoop,\n\tfind,\n} from \"./utils\";\n\nclass Chart extends PureComponent {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.yScale = this.yScale.bind(this);\n\t\tthis.listener = this.listener.bind(this);\n\t}\n\tcomponentWillMount() {\n\t\tconst { id } = this.props;\n\t\tconst { subscribe } = this.context;\n\t\tsubscribe(\"chart_\" + id,\n\t\t\t{\n\t\t\t\tlistener: this.listener,\n\t\t\t}\n\t\t);\n\t}\n\tcomponentWillUnmount() {\n\t\tconst { id } = this.props;\n\t\tconst { unsubscribe } = this.context;\n\t\tunsubscribe(\"chart_\" + id);\n\t}\n\tlistener(type, moreProps, state, e) {\n\t\tconst { id, onContextMenu } = this.props;\n\n\t\tif (type === \"contextmenu\") {\n\t\t\tconst { currentCharts } = moreProps;\n\t\t\tif (currentCharts.indexOf(id) > -1) {\n\t\t\t\tonContextMenu(moreProps, e);\n\t\t\t}\n\t\t}\n\t}\n\tyScale() {\n\t\tconst chartConfig = find(this.context.chartConfig, each => each.id === this.props.id);\n\t\treturn chartConfig.yScale.copy();\n\t}\n\tgetChildContext() {\n\t\tconst { id: chartId } = this.props;\n\t\tconst chartConfig = find(this.context.chartConfig, each => each.id === chartId);\n\n\t\treturn {\n\t\t\tchartId,\n\t\t\tchartConfig,\n\t\t};\n\t}\n\trender() {\n\t\tconst { origin } = find(this.context.chartConfig, each => each.id === this.props.id);\n\t\tconst [x, y] = origin;\n\n\t\treturn <g transform={`translate(${ x }, ${ y })`}>{this.props.children}</g>;\n\t}\n}\n\nChart.propTypes = {\n\theight: PropTypes.number,\n\twidth: PropTypes.number,\n\torigin: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.func\n\t]),\n\tid: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n\tyExtents: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.func\n\t]),\n\tyExtentsCalculator: function(props, propName, componentName) {\n\t\tif (isNotDefined(props.yExtents) && typeof props.yExtentsCalculator !== \"function\")\n\t\t\treturn new Error(\"yExtents or yExtentsCalculator must\"\n\t\t\t\t+ ` be present on ${componentName}. Validation failed.`);\n\t},\n\tonContextMenu: PropTypes.func,\n\tyScale: PropTypes.func,\n\n\tflipYScale: PropTypes.bool,\n\tpadding: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.shape({\n\t\t\ttop: PropTypes.number,\n\t\t\tbottom: PropTypes.number,\n\t\t})\n\t]),\n\tchildren: PropTypes.node,\n};\n\nChart.defaultProps = {\n\tid: 0,\n\torigin: [0, 0],\n\tpadding: 0,\n\tyScale: scaleLinear(),\n\tflipYScale: false,\n\tyPan: true,\n\tonContextMenu: noop,\n};\n\nChart.contextTypes = {\n\tchartConfig: PropTypes.array,\n\tsubscribe: PropTypes.func.isRequired,\n\tunsubscribe: PropTypes.func.isRequired,\n};\n\nChart.childContextTypes = {\n\tchartConfig: PropTypes.object.isRequired,\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n};\n\nexport default Chart;\n"]}