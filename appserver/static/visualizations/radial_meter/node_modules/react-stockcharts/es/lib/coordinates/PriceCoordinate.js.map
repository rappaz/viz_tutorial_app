{"version":3,"sources":["../../../../src/lib/coordinates/PriceCoordinate.js"],"names":["React","Component","PropTypes","drawOnCanvas","renderSVG","GenericChartComponent","getAxisCanvas","PriceCoordinate","props","bind","ctx","moreProps","helper","propTypes","displayFormat","func","isRequired","yAxisPad","number","rectWidth","rectHeight","orient","oneOf","at","price","dx","arrowWidth","fill","string","opacity","lineOpacity","lineStroke","fontFamily","fontSize","textFill","defaultProps","width","yScale","chartConfig","lowerPrice","domain","upperPrice","lowerYValue","range","upperYValue","rangeSlope","x1","x2","edgeAt","type","priceShowTolerance","y","show","coordinate","invert","hideLine","coordinateProps","y1","y2"],"mappings":"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","file":"PriceCoordinate.js","sourcesContent":["\"use strict\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { drawOnCanvas, renderSVG } from \"./EdgeCoordinateV3\";\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\n\nclass PriceCoordinate extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst props = helper(this.props, moreProps);\n\t\tdrawOnCanvas(ctx, props);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst props = helper(this.props, moreProps);\n\t\treturn renderSVG(props);\n\t}\n\trender() {\n\t\treturn <GenericChartComponent\n\t\t\tclip={false}\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\tdrawOn={[\"pan\"]}\n\t\t/>;\n\t}\n}\n\nPriceCoordinate.propTypes = {\n\tdisplayFormat: PropTypes.func.isRequired,\n\tyAxisPad: PropTypes.number,\n\trectWidth: PropTypes.number,\n\trectHeight: PropTypes.number,\n\torient: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\n\tat: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\n\tprice: PropTypes.number,\n\tdx: PropTypes.number,\n\tarrowWidth: PropTypes.number,\n\tfill: PropTypes.string,\n\topacity: PropTypes.number,\n\tlineOpacity: PropTypes.number,\n\tlineStroke: PropTypes.string,\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n\ttextFill: PropTypes.string,\n};\n\nPriceCoordinate.defaultProps = {\n\tyAxisPad: 0,\n\trectWidth: 50,\n\trectHeight: 20,\n\torient: \"left\",\n\tat: \"left\",\n\tprice: 0,\n\tdx: 0,\n\tarrowWidth: 0,\n\tfill: \"#BAB8b8\",\n\topacity: 1,\n\tlineOpacity: 0.2,\n\tlineStroke: \"#000000\",\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 13,\n\ttextFill: \"#FFFFFF\",\n};\n\nfunction helper(props, moreProps) {\n\tconst { width } = moreProps;\n\tconst { chartConfig: { yScale } } = moreProps;\n\tconst lowerPrice = yScale.domain()[0];\n\tconst upperPrice = yScale.domain()[1];\n\tconst lowerYValue = yScale.range()[0];\n\tconst upperYValue = yScale.range()[1];\n\tconst rangeSlope = (lowerPrice - upperPrice) / (lowerYValue - upperYValue);\n\n\tconst { orient, at, rectWidth, rectHeight, displayFormat, dx, price } = props;\n\tconst { fill, opacity, fontFamily, fontSize, textFill, arrowWidth, lineOpacity, lineStroke } = props;\n\n\tconst x1 = 0, x2 = width;\n\tconst edgeAt = (at === \"right\")\n\t\t? width\n\t\t: 0;\n\n\tconst type = \"horizontal\";\n\tconst priceShowTolerance = 5;\n\n\tlet y = 0;\n\tlet show;\n\n\tif (price < (upperPrice + priceShowTolerance)\n\t\t\t|| price > (lowerPrice - priceShowTolerance)) {\n\t\ty = (price / rangeSlope) + (lowerYValue - (lowerPrice / rangeSlope));\n\t\tshow = true;\n\t}\telse {\n\t\tshow = false;\n\t}\n\n\tconst coordinate = displayFormat(yScale.invert(y));\n\tconst hideLine = false;\n\n\tconst coordinateProps = {\n\t\tcoordinate,\n\t\tshow,\n\t\ttype,\n\t\torient,\n\t\tedgeAt,\n\t\thideLine,\n\t\tlineOpacity,\n\t\tlineStroke,\n\t\tfill, opacity, fontFamily, fontSize, textFill,\n\t\trectWidth,\n\t\trectHeight,\n\t\tarrowWidth,\n\t\tdx,\n\t\tx1,\n\t\tx2,\n\t\ty1: y,\n\t\ty2: y,\n\t};\n\treturn coordinateProps;\n}\n\nexport default PriceCoordinate;\n"]}